#!/usr/bin/env bash

merge_yaml_sh() {
  # 最初のファイルをresultに格納
  result=$(cat "$1")

  # 残りのファイルをループ処理
  for file in "${@:2}"; do
      # yqを使用してYAMLをマージ
      result=$(echo "$result" | yq eval-all 'select(fileIndex == 0) * select(fileIndex == 1)' - "$file")
  done

  # 結果を表示
  echo "$result"
}